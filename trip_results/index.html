<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		
		
		
		<link rel="apple-touch-icon" sizes="57x57" href="../img/favicon/apple-icon-57x57.png">
		<link rel="apple-touch-icon" sizes="60x60" href="../img/favicon/apple-icon-60x60.png">
		<link rel="apple-touch-icon" sizes="72x72" href="../img/favicon/apple-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="76x76" href="../img/favicon/apple-icon-76x76.png">
		<link rel="apple-touch-icon" sizes="114x114" href="../img/favicon/apple-icon-114x114.png">
		<link rel="apple-touch-icon" sizes="120x120" href="../img/favicon/apple-icon-120x120.png">
		<link rel="apple-touch-icon" sizes="144x144" href="../img/favicon/apple-icon-144x144.png">
		<link rel="apple-touch-icon" sizes="152x152" href="../img/favicon/apple-icon-152x152.png">
		<link rel="apple-touch-icon" sizes="180x180" href="../img/favicon/apple-icon-180x180.png">
		<link rel="icon" type="image/png" sizes="192x192"  href="../img/favicon/android-icon-192x192.png">
		<link rel="icon" type="image/png" sizes="32x32" href="../img/favicon/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="96x96" href="../img/favicon/favicon-96x96.png">
		<link rel="icon" type="image/png" sizes="16x16" href="../img/favicon/favicon-16x16.png">
		<link rel="manifest" href="../img/favicon/manifest.json">
		<meta name="msapplication-TileColor" content="#154c7b">
		<meta name="msapplication-TileImage" content="../img/favicon/ms-icon-144x144.png">
		<meta name="theme-color" content="#154c7b">
		<title>Trip Results - TripKit SDK for Android</title>
			<link rel="stylesheet" href="../css/main.css">
			<link rel="stylesheet" href="../css/superfences.css">
			<link rel="stylesheet" href="../css/codehilite.css">
			<link rel="stylesheet"
				href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
			<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

			<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
			<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
			<script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
			<![endif]--> 
	</head>

	<body >
		<header class="navbar">
	
	<div class="search-container">
		<a class="search" href="#"></a><div class="search-form" id="mkdocs_search_modal" tabindex="-1" raria-labelledby="Search Modal" aria-hidden="true">
    <form role="form" class="container">
        <div class="search-icon"></div>
        <input type="text" class="search-field" placeholder="Type keyword..." id="mkdocs-search-query">
    </form>
    <div class="results-list">
    	<div id="mkdocs-search-results" class="container"></div>
    </div>
</div>
	</div>
	
	<div class="container-fluid">
		<a class="logo" href="..">
			<img src="../img/tripgo-api-logo-white.svg" alt="TripGo API Logo White" height="32" width="140">
		</a>

		<div class="divider"></div>
		<a class="menu-toggle" type="button" href="#" aria-hidden="true">
			<div class="bar-container">
				<span class="bar-1"></span>
				<span class="bar-2"></span>
				<span class="bar-3"></span>
			</div>
		</a>
		<div class="menu" aria-hidden="false">
			
				<ul>
					
						
							<li class="">
								<a href="..">Introduction</a>
							</li>
						
					
						
							<li class="">
								<a href="../tripkit_map_fragment/">TripKit Map Fragment</a>
							</li>
						
					
						
							<li class="">
								<a href="../search_location/">Searching for a Location</a>
							</li>
						
					
						
							<li class="current">
								<a href="./">Trip Results</a>
							</li>
						
					
						
							<li class="">
								<a href="../stop_detail/">Service & Stop Detail</a>
							</li>
						
					
						
							<li class="">
								<a href="../tripkit-android/">Class Documentation</a>
							</li>
						
					
				</ul>
			
		</div>
		
	</div>
	
</header>

		<div class="container -layout-3-9">
				<div class="col" role="complementary"><div class="sidebar hidden-print affix" role="complementary" id="sidebar">
	<div class="indicator"></div>
    <ul class="nav sidenav">
        <li class="main "><a href="#query" class="active">Query</a></li>
        <li class="main "><a href="#tripresultlistfragment" class="">TripResultListFragment</a></li>
        <li class="main "><a href="#tripsegmentlistfragment" class="">TripSegmentListFragment</a></li>
    </ul>
</div></div>
				<div class="col content" role="main">

<p>Once you have two <a href="tripkit-android/com.skedgo.android.common.model/-location/index.md"><code>Location</code></a> objects, you can get a list of routes between them, the individual services that handle those
routes, and the individual segments.</p>
<p>The <a href="../tripkit-android/com.skedgo.tripkit.ui.tripresults/-trip-result-list-fragment/"><code>TripResultListFragment</code></a> takes a <code>Query</code> which contains a pair of <a href="tripkit-android/com.skedgo.android.common.model/-location/index.md"><code>Locations</code></a> as well as weighting information,
and displays a list of possible routes.</p>
<h2 id="query">Query</h2>
<p>To begin with, you'll need to build a <a href="tripkit-android/com.skedgo.android.common.model/-query/index.md"><code>Query</code></a> object. Queries have locations, transport mode weighting, and contain
information about transfer time and walking speed. Two <a href="tripkit-android/com.skedgo.android.common.model/-location/index.md"><code>Locations</code></a> are required, but the rest is optional.</p>
<p>````kotlin tab="Kotlin"
    val query = Query().apply {
        fromLocation = departureLocation
        toLocation = destinationLocation
        cyclingSpeed = 1
        walkingSpeed = 1
        environmentWeight = 0.5
        hassleWeight = 1.0
        budgetWeight = 2.0
        setTimeTag(timeTagForQuery)
    }
<pre class="codehilite"><code>
````java tab="Java"
    Query query = new Query();
    query.setFromLocation(departureLocation);
    query.setToLocation(destinationLocation);
    query.setCyclingSpeed(1);
    query.setWalkingSpeed(1);
    query.setEnvironmentWeight(0.5);
    query.setHassleWeight(1);
    query.setBudgetWeight(2);
    query.setTimeTag(timeTagForQuery);</code></pre></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>fromLocation</td>
<td>Sets the departure location.</td>
</tr>
<tr>
<td>toLocation</td>
<td>Sets the destination location.</td>
</tr>
<tr>
<td>cyclingSpeed</td>
<td>A value of 0, 1, or 2. <em>0</em> = slow (12 km/h), <em>1</em> = medium (18 km/h), <em>2</em> = fast (25 km/h)</td>
</tr>
<tr>
<td>walkingSpeed</td>
<td>A value of 0, 1, or 2. <em>0</em> = slow (2.5 km/h), <em>1</em> = medium (4 km/h), <em>2</em> = fast (4.5 km/h)</td>
</tr>
<tr>
<td>transferTime</td>
<td>Preferred minimum transfer time in minutes.</td>
</tr>
<tr>
<td>timeWeight</td>
<td>Part of the weighting profile specifying the user's preference for duration. It should be a value between <em>0.1</em> (unimportant) and <em>2.0</em> (important).</td>
</tr>
<tr>
<td>budgetWeight</td>
<td>Part of the weighting profile specifying the user's preference for price. It should be a value between <em>0.1</em> (unimportant) and <em>2.0</em> (important).</td>
</tr>
<tr>
<td>hassleWeight</td>
<td>Part of the weighting profile specifying the user's preference for convenience. It should be a value between <em>0.1</em> (unimportant) and <em>2.0</em> (important).</td>
</tr>
<tr>
<td>environmentWeight</td>
<td>Part of the weighting profile specifying the user's preference for environmental impact. It should be a value between <em>0.1</em> (unimportant) and <em>2.0</em> (important).</td>
</tr>
<tr>
<td>unit</td>
<td>Sets the distance unit used. It should be a string value of <em>"auto"</em>, <em>"imperial"</em> or <em>"metric"</em></td>
</tr>
</tbody>
</table>
<h2 id="tripresultlistfragment">TripResultListFragment</h2>
<p><img alt="TripResultListFragment" src="../img/TripResultListFragment.png" /></p>
<p>Once you have your query, you can launch a <a href="../tripkit-android/com.skedgo.tripkit.ui.tripresults/-trip-result-list-fragment/"><code>TripResultListFragment</code></a>, which displays the results of an A-to-B route 
and automatically handles date/time selection and transit mode filtering.</p>
<p><img alt="TripResultListFragment mode filtering" src="../img/TripResultListFragment-ModeSelection.png" /></p>
<p>Transit modes are automatically saved and restored from <code>SharedPreferences</code> the next time that a trip result is displayed.</p>
<p>````kotlin tab="Kotlin"
    val fragment = TripResultListFragment.Builder()
            .withQuery(query)
            .build()
<pre class="codehilite"><code>
The origin and destination locations are clickable. When clicked, the fragment calls an [`OnLocationClickListener`](tripkit-android/com.skedgo.tripkit.ui.tripresults/-trip-result-list-fragment/-on-location-click-listener/index.md).

````kotlin tab="Kotlin"
    fragment.setOnLocationClickListener(
        startLocationClicked = {
            // You could show a LocationSearchFragment here
         }, 
        destinationLocationClicked = {
            // Or do nothing at all?
        })</code></pre></p>
<p>When the user chooses a particular trip, the <a href="../tripkit-android/com.skedgo.tripkit.ui.tripresults/-trip-result-list-fragment/-on-trip-selected-listener/"><code>OnTripSelectedListener</code></a> will be called with a <code>ViewTrip</code> result. 
You can then launch a <a href="../tripkit_map_fragment/#TripSegmentListFragment"><code>TripSegmentListFragment</code></a> to display the individual segments.</p>
<p>````kotlin tab="Kotlin"
    fragment.setOnTripSelectedListener { viewTrip -&gt; tripSelected(viewTrip)}
<pre class="codehilite"><code>
## TripResultMapFragment

![TripResultMapFragment](img/TripResultMapFragment.png)

With a ViewTrip chosen, you can display the route using a [`TripResultMapFragment`](tripkit-android/com.skedgo.tripkit.ui.tripresult/-trip-result-map-fragment/index.md). As TripKit caches route information
in the background, you only need to pass a UUID to the `withTripGroupId` function in the [`TripResultMapFragment.Builder`](tripkit-android/com.skedgo.tripkit.ui.tripresult/-trip-result-map-fragment/-builder/index.md). 

````kotlin tab="Kotlin"
    val mapFragment = TripResultMapFragment.Builder()
                                           .withTripGroupId(viewTrip.tripGroupUUID)
                                           .build()</code></pre></p>
<h2 id="tripsegmentlistfragment">TripSegmentListFragment</h2>
<p><img alt="TripSegmentListFragment" src="../img/TripSegmentListFragment.png" /></p>
<p>A list of trip segments can be shown with a <a href="../tripkit-android/com.skedgo.tripkit.ui.tripresult/-trip-segment-list-fragment/"><code>TripSegmentListFragment</code></a>. It can optionally show action buttons, in this
example, "Go" and "Favourite".</p>
<p>To build a <a href="../tripkit-android/com.skedgo.tripkit.ui.tripresult/-trip-segment-list-fragment/"><code>TripSegmentListFragment</code></a>, you only need a <code>ViewTrip</code>'s UUID.</p>
<p>````kotlin tab="Kotlin"
    val fragment = TripSegmentListFragment.Builder()
        .withTripGroupId(viewTrip.tripGroupUUID)
        .build()
<pre class="codehilite"><code>
````java tab="Java"
    TripSegmentListFragment fragment = new TripSegmentListFragment.Builder()
                                              .withTripGroupId(tripGroup.uuid())
                                              .build();</code></pre></p>
<p>If you'd also like to use buttons, pass it a list of <a href="../tripkit-android/com.skedgo.tripkit.ui.model/-trip-kit-button/"><code>TripKitButtons</code></a>. A <a href="../tripkit-android/com.skedgo.tripkit.ui.model/-trip-kit-button/"><code>TripKitButton</code></a> consists of a string identifier,
which you'll receive in the button click handler, and a resource identifier for a layout which will be inflated. The
layout can contain a single <code>Button</code> if you'd like.</p>
<p>````xml tab="Layout"</p>
<?xml version="1.0" encoding="utf-8"?>
<p><com.google.android.material.button.MaterialButton 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Go"
    app:backgroundTint="@color/colorPrimary"
    android:drawableLeft="@drawable/ic_directions"
    android:theme="@style/Theme.MaterialComponents"
    style="@style/Widget.MaterialComponents.Button.UnelevatedButton"/></p>
<pre class="codehilite"><code>
````kotlin tab="Kotlin"
        val buttonList = listOf(TripKitButton("go", R.layout.go_button), 
                                TripKitButton("favorite", R.layout.favourite_button))

        val fragment = TripSegmentListFragment.Builder()
            .withTripGroupId(trip!!.tripGroupUUID)
            .withButtons(buttonList)
            .build()</code></pre>
<p>When the button is clicked, the <a href="../tripkit-android/com.skedgo.tripkit.ui.tripresult/-trip-segment-list-fragment/-on-trip-kit-button-click-listener/"><code>TripSegmentListFragment.OnTripKitButtonClickListener</code></a> will be called with the id of the <a href="../tripkit-android/com.skedgo.tripkit.ui.model/-trip-kit-button/"><code>TripKitButton</code></a> and the
current trip group.</p>
<p>````kotlin tab="Kotlin"
        fragment.setOnTripKitButtonListener { id, tripGroup -&gt;  // Do something with the button }
<pre class="codehilite"><code>
## TripResultPagerFragment

To provide a more convenient user interface, the [`TripResultPagerFragment`](tripkit-android/com.skedgo.tripkit.ui.tripresult/-trip-result-pager-fragment/index.md) bundles all of the possible [`TripSegmentListFragments`](trip_results.md#TripSegmentListFragment)
for a given result list into a view pager, allowing the user to swipe back and forth through the routes. If it is given a
[`TripResultMapFragment`](trip_results.md#TripResultMapFragment), it will automatically change the map to display the correct route.

Like the [`TripSegmentListFragment`](trip_results.md#TripSegmentListFragment), you can pass it [`TripKitButtons`](tripkit-android/com.skedgo.tripkit.ui.model/-trip-kit-button/index.md), and provide a [`TripResultPagerFragment.OnTripKitButtonClickListener`](tripkit-android/com.skedgo.tripkit.ui.tripresult/-trip-result-pager-fragment/-on-trip-kit-button-click-listener/index.md) to receive the click events.

````kotlin tab="Kotlin"
    val pagerFragment = TripResultPagerFragment.Builder()
            .withTripButton("go",  R.layout.go_button)
            .withTripButton("favorite", R.layout.bookmark_button)
            .withMapFragment(mapFragment)
            .withViewTrip(viewTrip)
            .build()

    pagerFragment.setOnTripKitButtonClickListener { id, tripGroup -&gt;
        if (id == "go") {
            Toast.makeText(context!!, "Will go to ${tripGroup.uuid()}", Toast.LENGTH_SHORT).show()
        } else if (id == "favorite") {
            Toast.makeText(context!!, "Will add ${tripGroup.uuid()} as a favorite", Toast.LENGTH_SHORT).show()
        }
    }</code></pre></p></div>
		</div>
		<div class="navbar-bottom" role="navigation">
	<div class="container -layout-6-6">
			    <div class="col">
			        <a rel="next"  href="../search_location/"  class="prev">
			            <div class="label">
			            	Previous
			            </div>
			            <div class="title">
			            	Searching for a Location
			            </div>
			        </a>
			    </div>
			    <div class="col">
			        <a rel="prev"  href="../stop_detail/" class="next">
			            <div class="label">
			            	Next
			            </div>
			            <div class="title">
			            	Service & Stop Detail
			            </div>
			        </a>
			    </div>
	</div>
</div>
		<footer class="footer">
	<div class="logo">
		<img src="../img/tripgo-api-logo-mono.svg" alt="TripGo Logo" width="134" height="34">
	</div>
	<ul class="menu">
		<li>
			<a href="https://www.skedgo.com">SkedGo website</a>
		</li>
		<li>
			<a href="https://skedgo.com/en/tripgo-api/pricing/">Pricing</a>
		</li>
		<li>
			<a href="https://github.com/skedgo/tripgo-api/issues">Report issue</a>
		</li>
		<li>
			<a href="mailto:api@tripgo.com">Email support</a>
		</li>
		<li>
			<a href="http://slack.tripgo.com/">Slack community</a>
		</li>
	</ul>
</footer>
			<script>var base_url = '..';</script>
			<script src="../js/app.min.js"></script>
				<script src="../search/main.js"></script>
</body>
</html>